<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create an R package structure — new_package • rcompendium</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create an R package structure — new_package" />
<meta property="og:description" content="This function creates a new R package structure according to the CRAN
policies. Essential features of an R package are created (DESCRIPTION and
NAMESPACE files, and R/ and man/ folders). The project is also
versioning with git and a generic R .gitignore is added.
IMPORTANT - Before using this function user needs to create a new folder
(or a new project if using RStudio) and run this function inside this folder
(by using setwd() or by opening the Rproj in a new Rstudio session).
The name of the package will be the same as the name of this folder and
some rules must be respected:
https://r-pkgs.org/workflows101.html#naming.
Some fields of the DESCRIPTION file (maintainer information, package name,
license, URLs, and  roxygen2 version)  are automatically filled but
others (title and description) need to be edited manually.
Additional features are also created: a CITATION file, a README.Rmd, and
a vignettes/ folder (optional). See below the section Package Content
to see the full structure of the R package.
A GitHub repository can also be created (default) following the
&quot;GitHub last&quot; workflow
(https://happygitwithr.com/existing-github-last.html).
Configuration files for GitHub Actions to automatically check the package and
deploy the website pkgdown::pkgdown() will be added in the .github/
folder. See below the section Creating a GITHUB Repository." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rcompendium</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create an R package structure</h1>
    
    <div class="hidden name"><code>new_package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a new R package structure according to the CRAN
policies. Essential features of an R package are created (<code>DESCRIPTION</code> and
<code>NAMESPACE</code> files, and <code>R/</code> and <code>man/</code> folders). The project is also
<strong>versioning with git</strong> and a generic R <code>.gitignore</code> is added.</p>
<p><strong>IMPORTANT -</strong> Before using this function user needs to create a new folder
(or a new project if using RStudio) and run this function inside this folder
(by using <code><a href='https://rdrr.io/r/base/getwd.html'>setwd()</a></code> or by opening the Rproj in a new Rstudio session).
<strong>The name of the package will be the same as the name of this folder and
some rules must be respected</strong>:
<a href='https://r-pkgs.org/workflows101.html#naming'>https://r-pkgs.org/workflows101.html#naming</a>.</p>
<p>Some fields of the <code>DESCRIPTION</code> file (maintainer information, package name,
license, URLs, and  <code>roxygen2</code> version)  are automatically filled but
others (title and description) need to be edited manually.</p>
<p>Additional features are also created: a <code>CITATION</code> file, a <code>README.Rmd</code>, and
a <code>vignettes/</code> folder (optional). See below the section <strong>Package Content</strong>
to see the full structure of the R package.</p>
<p>A GitHub repository can also be created (default) following the
"GitHub last" workflow
(<a href='https://happygitwithr.com/existing-github-last.html'>https://happygitwithr.com/existing-github-last.html</a>).
Configuration files for GitHub Actions to automatically check the package and
deploy the website <code><a href='https://pkgdown.r-lib.org/reference/pkgdown-package.html'>pkgdown::pkgdown()</a></code> will be added in the <code>.github/</code>
folder. See below the section <strong>Creating a GITHUB Repository</strong>.</p>
    </div>

    <pre class="usage"><span class='fu'>new_package</span><span class='op'>(</span>
  license <span class='op'>=</span> <span class='st'>"GPL (&gt;= 2)"</span>,
  status <span class='op'>=</span> <span class='st'>"concept"</span>,
  lifecycle <span class='op'>=</span> <span class='st'>"experimental"</span>,
  create_repo <span class='op'>=</span> <span class='cn'>TRUE</span>,
  private <span class='op'>=</span> <span class='cn'>FALSE</span>,
  gh_check <span class='op'>=</span> <span class='cn'>TRUE</span>,
  website <span class='op'>=</span> <span class='cn'>TRUE</span>,
  given <span class='op'>=</span> <span class='cn'>NULL</span>,
  family <span class='op'>=</span> <span class='cn'>NULL</span>,
  email <span class='op'>=</span> <span class='cn'>NULL</span>,
  orcid <span class='op'>=</span> <span class='cn'>NULL</span>,
  github <span class='op'>=</span> <span class='cn'>NULL</span>,
  organisation <span class='op'>=</span> <span class='cn'>NULL</span>,
  overwrite <span class='op'>=</span> <span class='cn'>FALSE</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>license</th>
      <td><p>a character vector of length 1</p>
<p>The license to be used for this package. Run <code><a href='get_licenses.html'>get_licenses()</a></code> to choose an
appropriate one. Default is <code>license = 'GPL (&gt;= 2)'</code></p>
<p>The license can be changed later by using <code><a href='add_license.html'>add_license()</a></code> (and
<code><a href='add_license_badge.html'>add_license_badge()</a></code> or <code><a href='refresh.html'>refresh()</a></code> to update the corresponding badge).</p></td>
    </tr>
    <tr>
      <th>status</th>
      <td><p>a character vector of length 1</p>
<p>The status of the project according to the standard defined by the
<a href='https://www.repostatus.org/'>https://www.repostatus.org/</a> project. One among <code>'concept'</code> (default),
<code>'wip'</code>, <code>'suspended'</code>, <code>'abandoned'</code>, <code>'active'</code>, <code>'inactive'</code>, or
<code>'unsupported'</code>. See <code><a href='add_repostatus_badge.html'>add_repostatus_badge()</a></code> for further information.</p>
<p>This argument is used to add a badge to the <code>README.Rmd</code> to help visitors
to better understand your project. If you don't want this badge use
<code>status = NULL</code>.</p>
<p>This status can be added/changed later by using <code><a href='add_repostatus_badge.html'>add_repostatus_badge()</a></code>.</p></td>
    </tr>
    <tr>
      <th>lifecycle</th>
      <td><p>a character vector of length 1</p>
<p>The lifecycle stage of the project according to the standard defined at
<a href='https://lifecycle.r-lib.org/articles/stages.html'>https://lifecycle.r-lib.org/articles/stages.html</a>. One among
<code>'experimental'</code> (default), <code>'stable'</code>, <code>'deprecated'</code>, or <code>'superseded'</code>.
See <code><a href='add_lifecycle_badge.html'>add_lifecycle_badge()</a></code> for further information.</p>
<p>This argument is used to add a badge to the <code>README.Rmd</code> to help visitors
to better understand your project. If you don't want this badge use
<code>lifecycle = NULL</code>.</p>
<p>This stage can be added/changed later by using <code><a href='add_lifecycle_badge.html'>add_lifecycle_badge()</a></code>.</p></td>
    </tr>
    <tr>
      <th>create_repo</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> (default) creates a repository (public if <code>private = FALSE</code> or
private if <code>private = TRUE</code>) on GitHub. See below the section
<strong>Creating a GITHUB Repository</strong>.</p></td>
    </tr>
    <tr>
      <th>private</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> creates a private repository on user GitHub account (or
organisation). Default is <code>private = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>gh_check</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> (default) configures GitHub Actions to automatically check and
test the package after each push. This will run <code>R CMD check</code> on the three
major operating systems (Ubuntu, macOS, and Windows) on the latest release
of R. See <code><a href='add_github_actions_check.html'>add_github_actions_check()</a></code> for further information.</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p></td>
    </tr>
    <tr>
      <th>website</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> (default) configures GitHub Actions to automatically build and
deploy the package website (using <code><a href='https://pkgdown.r-lib.org/reference/pkgdown-package.html'>pkgdown::pkgdown()</a></code>) after each push. A
<strong>gh-pages</strong> branch will be created using <code><a href='https://usethis.r-lib.org/reference/use_github_pages.html'>usethis::use_github_pages()</a></code>
and the GitHub repository will be automatically configured.</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p></td>
    </tr>
    <tr>
      <th>given</th>
      <td><p>a character vector of length 1</p>
<p>The given name of the maintainer of the package. If <code>NULL</code> (default) the
function will try to get this value by reading the <code>.Rprofile</code> file.</p>
<p>For further information see <code><a href='set_credentials.html'>set_credentials()</a></code> and below the section
<strong>Managing Credentials</strong>.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>a character vector of length 1</p>
<p>The family name of the maintainer of the package. If <code>NULL</code> (default) the
function will try to get this value by reading the <code>.Rprofile</code> file.</p>
<p>For further information see <code><a href='set_credentials.html'>set_credentials()</a></code> and below the section
<strong>Managing Credentials</strong>.</p></td>
    </tr>
    <tr>
      <th>email</th>
      <td><p>a character vector of length 1</p>
<p>The email address of the maintainer of the package. If <code>NULL</code> (default) the
function will try to get this value by reading the <code>.Rprofile</code> file.</p>
<p>For further information see <code><a href='set_credentials.html'>set_credentials()</a></code> and below the section
<strong>Managing Credentials</strong>.</p></td>
    </tr>
    <tr>
      <th>orcid</th>
      <td><p>a character vector of length 1</p>
<p>The ORCID of the maintainer of the package. If <code>NULL</code> (default) the
function will try to get this value by reading the <code>.Rprofile</code> file.</p>
<p>For further information see <code><a href='set_credentials.html'>set_credentials()</a></code> and below the section
<strong>Managing Credentials</strong>.</p></td>
    </tr>
    <tr>
      <th>github</th>
      <td><p>a character vector of length 1</p>
<p>The GitHub pseudo of the maintainer of the package. It will be used to
create the repository on GitHub unless <code>!is.null(organisation)</code> (the
repository will be created on the GitHub organisation specified by the
argument <code>organisation</code>).</p>
<p>If <code>NULL</code> (default) the function will try to get this value by reading
the <code>.Rprofile</code> file (unless <code>!is.null(organisation)</code>).</p></td>
    </tr>
    <tr>
      <th>organisation</th>
      <td><p>a character vector of length 1</p>
<p>The GitHub organisation to host the repository. If defined it will
overwrite the argument <code>github</code>.</p>
<p>Default is <code>organisation = NULL</code> (the GitHub pseudo will be used).</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> files written from templates and modified by user are erased.
Default is <code>overwrite = FALSE</code>. <strong>Be careful while using this argument</strong>.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>a logical value</p>
<p>If <code>TRUE</code> messages are deleted. Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Package Content</h3>


<p>With default settings the package <code>pkg</code> will contain:</p><pre>.
│
├── .git/                     # GIT tracking folder
├── .github/                  # (optional) GitHub Actions settings
│   └── workflows/
│       ├── pkgdown.yaml      # Configuration file to build &amp; deploy website
│       └── R-CMD-check.yaml  # Configuration file to check &amp; test package
├── .Rbuildignore             # Automatically generated
├── .gitignore                # Specific to R packages
├── pkg.Rproj                 # (optional) Created by user 
├── _pkgdown.yaml             # (optional) User website settings
│
├── R/                        # R functions
│   └── pkg-package.R         # Dummy R file for package-level documentation
│
├── man/                      # R functions helps (automatically updated)
│   ├── figures/              # Figures for the README 
│       └── hexsticker.png    # Template R package HexSticker
│   └── pkg-package.Rd        # Package-level documentation
│
├── inst/
│   └── CITATION              # BiBTeX entry to cite the R package       [*]
│
├── vignettes/
│   └── pkg_vignette.Rmd      # (optional) Package tutorial              [*]
│
├── DESCRIPTION               # Project metadata                         [*]
├── NAMESPACE                 # Automatically generated
│
├── LICENSE                   # (optional) If License = MIT
├── LICENSE.md                # Content of the chosen license
│
├── README.md                 # GitHub README (automatically generated)
└── README.Rmd                # GitHub README (to knit)                  [*]

[*] These files are automatically edited but user needs to add manually 
    some information.

</pre>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Recommended Workflow</h3>


<p>The purpose of the package <code>rcompendium</code> is to make easier the creation of R
package/research compendium so that user can focus on the code/analysis
instead of wasting time organizing files.</p>
<p>The recommended workflow is as follow:</p><ul>
<li><p>Create an empty RStudio project;</p></li>
<li><p>Store your credentials with <code><a href='set_credentials.html'>set_credentials()</a></code> (if not already done);</p></li>
<li><p>Run <code>new_package()</code> to create the package structure (and the GitHub
repository);</p></li>
<li><p>Edit some metadata in <code>DESCRIPTION</code>, <code>CITATION</code>, and <code>README.Rmd</code>;</p></li>
<li><p>Implement, document &amp; test functions (the fun part);</p></li>
<li><p>Update the project (update <code>.Rd</code> files, <code>NAMESPACE</code>, external dependencies
in <code>DESCRIPTION</code>, re-knit <code>README.Rmd</code>, and check package integrity) with
<code><a href='refresh.html'>refresh()</a></code>.</p></li>
</ul>


<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Managing Credentials</h3>


<p>You can use the arguments <code>given</code>, <code>family</code>, <code>email</code>, <code>orcid</code>, and <code>github</code>
directly with the function <code>new_package()</code> (and others). But if you create
a lot a projects (packages and/or compendiums) it can be frustrating in the
long run.</p>
<p>An alternative is to use <strong>ONCE AND FOR ALL</strong> the function
<code><a href='set_credentials.html'>set_credentials()</a></code> to permanently store this information in the
<code>.Rprofile</code> file. If these arguments are set to <code>NULL</code> (default) each
function of the package <code>rcompendium</code> will search in this <code>.Rprofile</code> file.
It will save your time (it's the purpose of this package).</p>
<p>Even if you have stored your information in the <code>.Rprofile</code> file you will
always be able to modify them on-the-fly (i.e. by using arguments of the
<code>new_package()</code>) or permanently by re-running <code><a href='set_credentials.html'>set_credentials()</a></code>.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Creating a GITHUB Repository</h3>


<p>First run <code><a href='https://gh.r-lib.org/reference/gh_whoami.html'>gh::gh_whoami()</a></code> to see if your git and associated credentials are
correctly configured. If so you should see something like:</p><pre>{
"name": "Given Family",
"login": "pseudo",
"html_url": "https://github.com/pseudo",
...
}
</pre>

<p>Otherwise see <code><a href='https://docs.ropensci.org/gert/reference/git_config.html'>gert::git_config()</a></code> to debug.</p>
<p>To create the GitHub repository directly from R, the package <code>rcompendium</code>
uses the function <code><a href='https://usethis.r-lib.org/reference/use_github.html'>usethis::use_github()</a></code>, an interface to the GitHub
REST API. The interaction with this API required an authentication method:
a <strong>GITHUB PAT</strong> (Personal Access Token).</p>
<p>If you don't have a <strong>GITHUB PAT</strong> locally stored, you must:</p><ol>
<li><p>Obtain a new one from your GitHub account. <strong>Make sure to select
at least the first two scopes (private repository and workflow)</strong></p></li>
<li><p>Store it in the <code>.Renviron</code> file by using <code><a href='https://usethis.r-lib.org/reference/edit.html'>usethis::edit_r_environ()</a></code>
and adding the following line: <code>GITHUB_PAT='99z9...z9'</code></p></li>
</ol>

<p>See <code><a href='https://usethis.r-lib.org/reference/github-token.html'>usethis::gh_token_help()</a></code> for more information about getting and
configuring a <strong>GITHUB PAT</strong>.</p>
<p>If everything is well configured you should see something like:</p><pre>{
"name": "Given Family",
"login": "pseudo",
"html_url": "https://github.com/pseudo",
"scopes": "delete_repo, repo, workflow",
"token": "99z9...z9"
}
</pre>

<p>And you will be able to create a GitHub repository directly from R!</p>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other setup functions: 
<code><a href='new_compendium.html'>new_compendium</a>()</code>,
<code><a href='refresh.html'>refresh</a>()</code>,
<code><a href='set_credentials.html'>set_credentials</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>rcompendium</span><span class='op'>)</span>

<span class='co'>## Define **ONCE FOR ALL** your credentials ----</span>
<span class='fu'><a href='set_credentials.html'>set_credentials</a></span><span class='op'>(</span><span class='st'>"Given"</span>, <span class='st'>"Family"</span>, <span class='st'>"email.address@domain.com"</span>, 
                github <span class='op'>=</span> <span class='st'>"pseudo"</span>, orcid <span class='op'>=</span> <span class='st'>"0000-0000-0000-0000"</span><span class='op'>)</span>

<span class='co'>## Create an R package ----</span>
<span class='fu'>new_package</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'>## Start developing functions ----</span>
<span class='co'>## ...</span>

<span class='co'>## Update package (documentation, dependencies, README, check) ----</span>
<span class='fu'><a href='refresh.html'>refresh</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Casajus.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


